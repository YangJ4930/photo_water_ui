# 智能水印文件管理系统

这是一个基于PyQt6开发的图片水印管理系统，支持图片的导入、导出、批量处理和水印管理功能。系统提供了丰富的水印设置选项，包括文本水印和图片水印，并支持水印模板的保存和管理。

## 功能特点

### 基础功能
- 支持单张或批量图片导入
- 支持拖拽导入图片
- 支持主流图片格式（JPEG、PNG、BMP、TIFF）
- 可自定义导出文件命名规则
- 支持JPEG质量调节
- 实时图片预览功能

### 水印功能
- 支持文本水印和图片水印
- 文本水印功能：
  - 自定义文本内容
  - 字体选择和大小调节
  - 颜色选择
  - 位置调整（9个预设位置）
  - 透明度调节
- 图片水印功能：
  - 支持多种图片格式（PNG、JPG、JPEG、BMP、GIF）
  - 大小缩放
  - 位置调整
  - 透明度调节
  - 一键删除图片

### 模板管理
- 保存当前水印设置为模板
- 加载已保存的模板
- 管理模板（重命名、删除）
- 自动保存最后使用的设置
- 程序启动时自动加载上次设置

## 安装说明

### 方式一：直接运行（推荐）

1. 从[GitHub Releases](https://github.com/your-username/photo-watermark-ui/releases)页面下载最新版本的可执行文件
2. 解压下载的压缩包
3. 运行解压后目录中的`photo_watermark.exe`文件

### 方式二：从源码运行

#### 系统要求
- Python 3.8 或更高版本
- PyQt6 6.4.0 或更高版本
- Pillow 10.0.0 或更高版本

#### 安装步骤
1. 克隆或下载项目代码
2. 安装依赖包：
   ```bash
   pip install -r requirements.txt
   ```
3. 运行程序：
   ```bash
   python main.py
   ```

## 使用说明

### 基本操作
1. 导入图片：
   - 点击"导入图片"按钮选择图片文件
   - 或直接将图片文件拖拽到程序窗口

2. 导出设置：
   - 选择输出格式（JPEG/PNG）
   - 设置JPEG质量（仅JPEG格式）
   - 设置文件命名规则（前缀/后缀）

3. 导出图片：
   - 点击"导出图片"按钮
   - 选择导出目录
   - 等待处理完成

### 水印设置
1. 文本水印：
   - 在文本输入框中输入水印文字
   - 选择字体和大小
   - 设置文字颜色
   - 调整位置和透明度

2. 图片水印：
   - 点击"选择图片"按钮选择水印图片
   - 调整图片大小
   - 设置位置和透明度
   - 可随时点击"删除图片"按钮移除水印图片

### 模板使用
1. 保存模板：
   - 调整好水印设置后，点击"保存为模板"按钮
   - 输入模板名称并保存

2. 加载模板：
   - 点击"加载模板"按钮
   - 从列表中选择要使用的模板

3. 管理模板：
   - 在模板管理界面可以重命名或删除已保存的模板
   - 程序会自动保存最后使用的设置，下次启动时自动加载

## 项目结构

```
├── main.py                # 程序入口
├── requirements.txt       # 依赖包列表
├── README.md             # 项目说明文档
├── ui/                   # 用户界面模块
│   ├── __init__.py
│   ├── main_window.py     # 主窗口类
│   ├── image_list_widget.py  # 图片列表控件
│   └── watermark_settings.py # 水印设置面板
├── utils/                # 工具类模块
│   ├── __init__.py
│   ├── image_processor.py  # 图片处理类
│   └── config_manager.py   # 配置管理类
└── templates/            # 水印模板目录
    └── default.json       # 默认模板
```

## 维护说明

### 代码结构

- `main.py`: 程序入口，负责创建和启动应用程序
- `ui/main_window.py`: 主窗口类，包含界面布局和主要功能实现
- `ui/image_list_widget.py`: 自定义图片列表控件，处理图片的显示和拖放功能
- `ui/watermark_settings.py`: 水印设置面板，管理文本和图片水印的设置
- `utils/image_processor.py`: 图片处理工具类，处理图片的加载、转换、水印添加和导出
- `utils/config_manager.py`: 配置管理类，处理模板的保存、加载和管理

### 扩展功能

如需添加新功能，建议按以下方式组织代码：

1. UI相关功能：在`ui`目录下创建新的控件类
2. 图片处理功能：在`utils/image_processor.py`中添加新的处理方法
3. 新的工具类：在`utils`目录下创建新的模块
4. 新的配置选项：在`utils/config_manager.py`中添加相应的配置处理逻辑